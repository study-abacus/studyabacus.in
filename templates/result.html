{% extends 'base.html' %}

{% block content %}
    <div class="boxed_wrapper">
        {% include 'header.html' %}

        <!--Page Title-->
        <section class="page-title">
            <div class="container">
                <div class="row clearfix">
                    <div class="col-md-6 col-sm-6 col-xs-12 pull-left">
                        <h1>Result</h1>
                    </div>
                    <div class="col-md-6 col-sm-6 col-xs-12 pull-right text-right path"><a href="index-2.html">Home</a>&ensp;>&ensp;<a href="#">Result</a>
                    </div>
                    <div class="overlay"></div>
                </div>
            </div>
        </section>
        <!--Page Title Ends-->
        
        <!--Result Section Start -->
        <section class="course-single">
            <div class="container">
                <form method="post" class="outer-box">
                    <input type="hidden" name="csrf_token" value="{{csrf_token()}}" />
                    <div class="content-box">
                        <h1 class="text-center"> Abacus Olympiad 2019-20 <br> Championship Result </h1>
                    </div>
                    <div id="timer" class="text-center" style="font-size: 5rem"></div>
                    <div class="row text" id="content" style="display: none;">
                        <div class="input-group style-two col-sm-12 col-md-6 col-md-offset-3">
                            <input name="roll_number" type="number" class="form-control" placeholder="Roll Number" />
                            <span class="input-group-btn">
                                <button class="btn btn-primary" type="submit">
                                    Submit
                                </button>
                            </span>
                        </div>
                    </div>
                    {% if result and result['exams'] %}
                    <div class="row text" style="margin-top: 30px">
                        <div class="col-12">
                            <h1 class="red gradient-text-pink" style="text-align: center; line-height: 50px;">Congratulations !</h1>
                        </div>
                        <div class="col-sm-12 col-md-6 col-md-offset-3" style="margin-top: 30px;">
                            <table class="table table-bordered table-striped">
                                <tbody>
                                    <tr>
                                        <th> Name: </th>
                                        <td> {{result['student_name'].upper()}} </td>
                                    </tr>
                                    <tr>
                                        <th> CI Name: </th>
                                        <td> {{result['ci_name']}} </td>
                                    </tr>
                                    <tr>
                                        <th> Roll Number: </th>
                                        <td> {{result['roll_number']}} </td>
                                    </tr>
                                    <tr>
                                        <td colspan="2"> Result </td>
                                    </tr>
                                    {% for exam in result['exams'] %}
                                    <tr>
                                        <th> {{exam['exam']}}: </th>
                                        <td> 
                                            {{exam['marks']}}% 
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    {% elif result %}
                    <div class="row text" style="margin-top: 30px">
                        <h3 style="text-align: center;">Result not found !</h3>
                    </div>
                    {% endif %}
                </form>
            </div>
        </section>
        <!--Result Section Start -->

        {% include 'footer.html' %}
    </div>
{% endblock %}

{% block script %}
    <script>
        $( document ).ready(function() {    
            // Set the date we're counting down to
            var countDownDate = new Date("Feb 10, 2020 18:00:00").getTime();

            // Update the count down every 1 second
            var x = setInterval(function() {

                // Get today's date and time
                var now = new Date().getTime();
                    
                // Find the distance between now and the count down date
                var distance = countDownDate - now;
                    
                // Time calculations for days, hours, minutes and seconds
                var days = Math.floor(distance / (1000 * 60 * 60 * 24));
                var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                var seconds = Math.floor((distance % (1000 * 60)) / 1000);
                    
                // Output the result in an element with id="demo"
                document.getElementById("timer").innerHTML = days + "d " + hours + "h "
                + minutes + "m " + seconds + "s ";
                    
                // If the count down is over, write some text 
                if (distance < 0) {
                    clearInterval(x);
                    document.getElementById("content").style.display = "block";
                }
            }, 1000);
        });

    </script>
{% endblock %}
